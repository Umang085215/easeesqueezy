import{r as c,u as P,j as e}from"./index-BkecdaOP.js";import{R as E,L as T,T as z,C as j}from"./index-Uba-gNxf.js";import{c as D,b as M,a as l,d as y}from"./index.esm-Mw-54Q2s.js";import{X as I}from"./x-BhHFVq_l.js";import{S as A}from"./save-CJ3WHk75.js";import"./createLucideIcon-DZf6o0AY.js";const N="snow",v={toolbar:[["bold","italic","underline","strike"],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],["link","image","video"],[{color:[]},{background:[]}],["clean"]],clipboard:{matchVisual:!1}},k=["bold","italic","underline","strike","align","list","indent","size","header","link","image","video","color","background"];function b(r,n){if(r==null)throw new TypeError("Cannot convert undefined or null to object");const u=Object(r);for(let m=1;m<arguments.length;m++){const t=arguments[m];if(t!=null)for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(u[i]=t[i])}return u}const Q=(r={theme:N,modules:v,formats:k})=>{const n=c.useRef(null),[u,m]=c.useState(!1),[t,i]=c.useState({Quill:void 0,quillRef:n,quill:void 0,editorRef:n,editor:void 0});return c.useEffect(()=>{if(t.Quill||i(x=>b(x,{Quill:require("quill").default})),t.Quill&&!t.quill&&n&&n.current&&u){const x=b(r,{modules:b(v,r.modules),formats:r.formats||k,theme:r.theme||N}),h=new t.Quill(n.current,x);i(b(b({},t),{quill:h,editor:h}))}m(!0)},[u,t,r]),t},R=D().shape({product_name:l().required("Product Name is required"),product_description:l().required("Description is required"),meta_title:l().required("Meta Tag Title is required"),meta_description:l().required("Meta Tag Description is required"),meta_keyword:l().required("Meta Tag Keywords are required"),category_id:l().required("Select category"),manufacturer_id:l().required("Select manufacturer"),price:y().typeError("Price must be a  number").positive("Price must be greater than 0").required("Price is required"),special_price:y().typeError("Special Price must be a  number").positive("Special Price must be greater than 0"),quantity:y().required("Quantity is required").min(1),status:l().required("Status is required"),model:l().required("Model is required"),sku:l().required("Stock keeping unit  is required"),image:M().required("Image is required")}),H=()=>{const[r,n]=c.useState({product_name:"",product_description:"",meta_title:"",meta_description:"",meta_keyword:"",model:"",sku:"",category_id:"",manufacturer_id:"",price:"",special_price:"",quantity:"",status:"",image:null}),[u,m]=c.useState(!1),[t,i]=c.useState({}),[x,h]=c.useState([]),_=P(),{quill:g,quillRef:L}=Q({theme:"snow",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]}});c.useEffect(()=>{g&&g.on("text-change",()=>{const a=g.root.innerHTML;n(s=>({...s,product_description:a})),i(s=>({...s,product_description:void 0}))})},[g]),c.useEffect(()=>{S()},[]);const o=a=>{const{name:s,value:d,files:p}=a.target;i(f=>({...f,[s]:void 0})),n(s==="image"?{...r,image:p[0]}:{...r,[s]:d})},w=async a=>{a.preventDefault();try{await R.validate(r,{abortEarly:!1}),i({});const s=localStorage.getItem("adminToken");if(!s){alert("You must be logged in to add a product.");return}const d=new FormData;Object.entries(r).forEach(([C,$])=>{d.append(C,$||"")});const p=await fetch("https://devshub.easeesqueezy.com/easeesqueezy_backend/public/api/admin/products",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:d}),f=await p.json();p.ok?(console.log("API Response:",f),n({product_name:"",product_description:"",meta_title:"",meta_description:"",meta_keyword:"",model:"",sku:"",category_id:"",manufacturer_id:"",price:"",special_price:"",quantity:"",status:"",image:null}),m(!0),_("/admin/products")):alert(f.message||"Failed to add product.")}catch(s){const d={};s.inner&&s.inner.forEach(p=>{d[p.path]=p.message}),i(d)}finally{m(!1)}},q=a=>{a.preventDefault(),n({product_name:"",product_description:"",meta_title:"",meta_description:"",meta_keyword:"",model:"",sku:"",category_id:"",manufacturer_id:"",price:"",special_price:"",quantity:"",status:"",image:null}),i({})},S=async()=>{const a=localStorage.getItem("adminToken");try{const d=await(await fetch("https://devshub.easeesqueezy.com/easeesqueezy_backend/public/api/admin/category",{method:"GET",headers:{Authorization:`Bearer ${a}`}})).json();h(d),console.log("Categories:",d)}catch(s){console.error("Error fetching categories:",s)}};return e.jsxs("div",{className:"p-6 bg-white shadow rounded",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Product"}),e.jsxs("div",{className:"mt-6 flex  gap-2",children:[e.jsx("button",{type:"button",onClick:q,className:"bg-gray-400 text-white px-2 py-1 rounded",children:e.jsx(I,{size:16})}),e.jsx("button",{type:"submit",disabled:u,form:"addProductForm",className:`bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded ${u?"bg-gray-400 cursor-not-allowed":"bg-[#003b19]"}`,children:u?"Saving ..":e.jsx(A,{size:16})}),e.jsx("button",{onClick:()=>_("/admin/products"),className:"bg-[#003b19] text-white px-2 py-1 rounded",children:"All Products"})]})]}),e.jsx("form",{id:"addProductForm",onSubmit:w,children:e.jsxs(E,{defaultValue:"general",children:[e.jsx(T,{className:"flex border-b overflow-x-auto",children:["General","Data","Image"].map(a=>e.jsx(z,{value:a.toLowerCase(),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-[#003b19] data-[state=active]:border-b-2 data-[state=active]:border-[#003b19] data-[state=active]:text-[#003b19] data-[state=active]:font-bold",children:a},a))}),e.jsxs(j,{value:"general",className:"p-4",children:[e.jsxs("label",{className:"block font-medium",children:["Product Name ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"product_name",value:r.product_name,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.product_name?"border-red-500":"border-gray-300"}`}),t.product_name&&e.jsx("p",{className:"text-red-500 text-sm",children:t.product_name}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:`rounded border ${t.product_description?"border-red-500":"border-gray-300"}`,children:e.jsx("input",{type:"text",name:"product_description",value:r.product_description,onChange:o})}),t.product_description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.product_description})]}),e.jsxs("label",{className:"block font-medium mt-3",children:["Meta Tag Title ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"meta_title",value:r.meta_title,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.meta_title?"border-red-500":"border-gray-300"}`}),t.meta_title&&e.jsx("p",{className:"text-red-500 text-sm",children:t.meta_title}),e.jsxs("label",{className:"block font-medium mt-3",children:["Meta Tag Description ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"meta_description",value:r.meta_description,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.meta_description?"border-red-500":"border-gray-300"}`}),t.meta_description&&e.jsx("p",{className:"text-red-500 text-sm",children:t.meta_description}),e.jsxs("label",{className:"block font-medium mt-3",children:["Meta Tag Keywords ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"meta_keyword",value:r.meta_keyword,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.meta_keyword?"border-red-500":"border-gray-300"}`}),t.meta_keyword&&e.jsx("p",{className:"text-red-500 text-sm",children:t.meta_keyword})]}),e.jsxs(j,{value:"data",className:"p-4",children:[e.jsxs("label",{className:"block font-medium mt-3",children:["Model",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"model",value:r.model,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.model?"border-red-500":"border-gray-300"}`}),t.model&&e.jsx("p",{className:"text-red-500 text-sm",children:t.model}),e.jsxs("label",{className:"block font-medium mt-3",children:["Sku",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"sku",value:r.sku,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.sku?"border-red-500":"border-gray-300"}`}),t.sku&&e.jsx("p",{className:"text-red-500 text-sm",children:t.sku}),e.jsxs("label",{className:"block font-medium mt-3",children:["Category Name ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category_id",value:r.category_id,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.category_id?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:" --Select Category--"}),x.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),t.category_id&&e.jsx("p",{className:"text-red-500 text-sm",children:t.category_id}),e.jsxs("label",{className:"block font-medium mt-3",children:["Manufacturer Id ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"manufacturer_id",value:r.manufacturer_id,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.manufacturer_id?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"--Select manufacturer_id--"}),e.jsx("option",{value:"1",children:"1"})]}),t.manufacturer_id&&e.jsx("p",{className:"text-red-500 text-sm",children:t.manufacturer_id}),e.jsxs("label",{className:"block font-medium mt-3",children:["Price ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"price",value:r.price,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.price?"border-red-500":"border-gray-300"}`}),t.price&&e.jsx("p",{className:"text-red-500 text-sm",children:t.price}),e.jsx("label",{className:"block font-medium mt-3",children:"Special Price "}),e.jsx("input",{type:"text",name:"special_price",value:r.special_price,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.special_price?"border-red-500":"border-gray-300"}`}),t.special_price&&e.jsx("p",{className:"text-red-500 text-sm",children:t.special_price}),e.jsxs("label",{className:"block font-medium mt-3",children:["Quantity ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"quantity",value:r.quantity,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.quantity?"border-red-500":"border-gray-300"}`}),t.quantity&&e.jsx("p",{className:"text-red-500 text-sm",children:t.quantity}),e.jsxs("label",{className:"block font-medium mt-3",children:["Status ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:r.status,onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.status?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:" --Select Status--"}),e.jsx("option",{value:"0",children:"Active"}),e.jsx("option",{value:"1",children:"Inactive"})]}),t.status&&e.jsx("p",{className:"text-red-500 text-sm",children:t.status})]}),e.jsxs(j,{value:"image",className:"p-4",children:[e.jsxs("label",{className:"block font-medium",children:["Image ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",name:"image",onChange:o,className:`border w-full p-2 rounded mb-1 focus:outline-none ${t.image?"border-red-500":"border-gray-300"}`}),t.image&&e.jsx("p",{className:"text-red-500 text-sm",children:t.image})]})]})})]})};export{H as default};
