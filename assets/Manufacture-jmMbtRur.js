import{r as n,u as v,j as e}from"./index-BnCbwZkm.js";import{c as N,a as w}from"./index.esm-DYWnu1UA.js";import{R as S,L as _,T as M,C}from"./index-D26aEQRc.js";import{X as E}from"./x-DmBsGtNk.js";import{S as k}from"./save-DDlZHtyX.js";import"./createLucideIcon-UP_FQQL6.js";const z=N().shape({manufacturer_id:w().required("Manufacturer Id is required")}),F=()=>{const[c,i]=n.useState(""),[l,d]=n.useState({}),[f,t]=n.useState(""),[b,u]=n.useState(""),[m,x]=n.useState(!1),h=v(),p=r=>{i(r.target.value),d({}),t(""),u("")},y=async r=>{r.preventDefault();try{await z.validate({manufacturer_id:c},{abortEarly:!1}),d({}),t(""),u("");const a=localStorage.getItem("adminToken");if(!a){t("You must be logged in to add a manufacturer_id.");return}x(!0);const o={name:c},s=await fetch("https://devshub.easeesqueezy.com/easeesqueezy_backend/public/api/admin/manufacturer_id",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(o)}),g=await s.json();s.ok&&g.status==="Manufacturer Id created successfully"?(u("Manufacturer Id added successfully!"),i("")):t(g.message||"Failed to add manufacturer_id. Please try again.")}catch(a){if(a.name==="ValidationError"){const o={};a.inner.forEach(s=>{o[s.path]=s.message}),d(o)}else t(a.message||"An error occurred. Please try again.")}finally{x(!1)}},j=r=>{r.preventDefault();try{d({}),i("")}catch(a){t(a)}};return e.jsxs("div",{className:"p-6 bg-white shadow rounded",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Manufacturer"}),e.jsxs("div",{className:"mt-6 flex  gap-2",children:[e.jsx("button",{type:"button",onClick:j,className:"bg-gray-400 text-white px-2 py-1 rounded",children:e.jsx(E,{size:16})}),e.jsx("button",{type:"submit",disabled:m,form:"manufacturer_idForm",className:`bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded ${m?"bg-gray-400 cursor-not-allowed":"bg-[#003b19]"}`,children:m?"Saving ..":e.jsx(k,{size:16})}),e.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-[#003b19] text-white py-1 px-2 rounded",children:"All Products"})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-8 w-full",children:e.jsx("form",{id:"manufacturer_idForm",onSubmit:y,className:"space-y-4",children:e.jsxs(S,{defaultValue:"general",children:[e.jsx(_,{className:"flex border-b overflow-x-auto",children:e.jsx(M,{value:"general",className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-[#003b19] data-[state=active]:border-b-2 data-[state=active]:border-[#003b19] data-[state=active]:text-[#003b19] data-[state=active]:font-bold ",children:"General"})}),e.jsxs(C,{value:"general",className:"p-4",children:[f&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-100 text-red-700 border border-red-300 text-sm text-center",children:f}),b&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-green-100 text-green-700 border border-green-300 text-sm text-center",children:b}),e.jsxs("label",{className:"block font-medium",children:["Manufacturer Id ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"manufacturer_id",value:c,onChange:p,className:`border w-full p-2 rounded mb-1 focus:outline-none ${l.manufacturer_id?"border-red-500":"border-gray-300"}`}),l.manufacturer_id&&e.jsx("p",{className:"text-red-500 text-sm",children:l.manufacturer_id})]})]})})})]})};export{F as default};
