import{r as n,u as w,j as e}from"./index-D2opam3L.js";import{c as j,a as b}from"./index.esm-D9ABzm6x.js";const y=j().shape({email:b().email("Invalid email format").required("Email is required"),password:b().min(6,"Password must be at least 6 characters").required("Password is required")}),E=()=>{const[a,p]=n.useState({email:"",password:"",rememberMe:!1}),[t,o]=n.useState({}),[c,g]=n.useState(""),i=w(),u=localStorage.getItem("adminToken");n.useEffect(()=>{u&&i("/admin")},[u,i]);const d=m=>{const{name:r,value:s,type:l,checked:h}=m.target;p({...a,[r]:l==="checkbox"?h:s}),o(f=>({...f,[r]:""}))},x=async m=>{m.preventDefault(),g("");try{await y.validate(a,{abortEarly:!1}),o({});const r=await fetch("https://devshub.easeesqueezy.com/easeesqueezy_backend/public/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}),s=await r.json();r.ok?(localStorage.setItem("adminToken",s.token),console.log("Admin login successful:",s),i("/admin")):(o({apiError:s.message||"Login failed"}),g(s.message))}catch(r){const s={};r.inner?.forEach(l=>{s[l.path]=l.message}),o(s)}};return e.jsxs("div",{className:"relative flex items-center justify-center min-h-screen bg-[url('/images/login1.svg')] bg-cover bg-center before:content-[''] before:absolute before:inset-0 before:bg-white/10 overflow-hidden",children:[e.jsx("div",{className:" w-[45%] absolute right-0 top-50 flex  justify-center mb-10 z-10 rotate-[180deg] h-screen ",children:e.jsx("img",{src:"/images/login.svg",alt:"admin logo",className:"w-full blur-md"})}),e.jsx("div",{className:"absolute left-10 top-10 flex  justify-center  z-10",children:e.jsx("img",{src:"/images/new_logo.webp",alt:"admin logo",className:"w-24 sm:w-36"})}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg px-8 py-12 w-full max-w-md border z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-[#003b19] mb-6",children:"Admin Sign in"}),c&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-100 text-red-700 border border-red-300 text-sm text-center",children:c}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Email"}),e.jsx("input",{type:"text",name:"email",placeholder:"Email",className:`w-full px-4 py-2 border rounded-lg focus:outline-none ${t.email?"border-red-500":"border-gray-300"}`,value:a.email,onChange:d}),t.email&&e.jsx("p",{className:"text-red-500 text-sm",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium",children:"Password"}),e.jsx("input",{type:"password",name:"password",placeholder:"password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none ${t.password?"border-red-500":"border-gray-300"}`,value:a.password,onChange:d}),t.password&&e.jsx("p",{className:"text-red-500 text-sm",children:t.password})]}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"rememberMe",checked:a.rememberMe,onChange:d}),"Remember Me"]})}),e.jsx("button",{type:"submit",className:"w-full bg-[#003b19] text-white py-2 rounded-lg hover:bg-[#014d21] transition",children:"Sign in"})]})]})]})};export{E as default};
