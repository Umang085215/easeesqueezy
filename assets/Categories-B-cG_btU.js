import{r as o,u as v,j as e}from"./index-BkecdaOP.js";import{c as N,a as C}from"./index.esm-Mw-54Q2s.js";import{R as w,L as S,T as E,C as k}from"./index-Uba-gNxf.js";import{X as z}from"./x-BhHFVq_l.js";import{S as T}from"./save-CJ3WHk75.js";import"./createLucideIcon-DZf6o0AY.js";const $=N().shape({category:C().required("Category is required")}),R=()=>{const[d,l]=o.useState(""),[i,n]=o.useState({}),[u,a]=o.useState(""),[b,g]=o.useState(""),[m,x]=o.useState(!1),h=v(),p=s=>{l(s.target.value),n({}),a(""),g("")},f=async s=>{s.preventDefault();try{await $.validate({category:d},{abortEarly:!1}),n({}),a(""),g("");const t=localStorage.getItem("adminToken");if(!t){a("You must be logged in to add a category.");return}x(!0);const c={name:d},r=await fetch("https://devshub.easeesqueezy.com/easeesqueezy_backend/public/api/admin/category",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(c)}),y=await r.json();r.ok&&y.status==="Category created successfully"?(g("Category added successfully!"),l("")):a(y.message||"Failed to add category. Please try again.")}catch(t){if(t.name==="ValidationError"){const c={};t.inner.forEach(r=>{c[r.path]=r.message}),n(c)}else a(t.message||"An error occurred. Please try again.")}finally{x(!1)}},j=s=>{s.preventDefault();try{n({}),l("")}catch(t){a(t)}};return e.jsxs("div",{className:"p-6 bg-white shadow rounded",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Category"}),e.jsxs("div",{className:"mt-6 flex  gap-2",children:[e.jsx("button",{type:"button",onClick:j,className:"bg-gray-400 text-white px-2 py-1 rounded",children:e.jsx(z,{size:16})}),e.jsx("button",{type:"submit",disabled:m,form:"categoryForm",className:`bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded ${m?"bg-gray-400 cursor-not-allowed":"bg-[#003b19]"}`,children:m?"Saving ..":e.jsx(T,{size:16})}),e.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-[#003b19] text-white py-1 px-2 rounded",children:"All Products"})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-8 w-full",children:e.jsx("form",{id:"categoryForm",onSubmit:f,className:"space-y-4",children:e.jsxs(w,{defaultValue:"general",children:[e.jsx(S,{className:"flex border-b overflow-x-auto",children:e.jsx(E,{value:"general",className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-[#003b19] data-[state=active]:border-b-2 data-[state=active]:border-[#003b19] data-[state=active]:text-[#003b19] data-[state=active]:font-bold ",children:"General"})}),e.jsxs(k,{value:"general",className:"p-4",children:[u&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-100 text-red-700 border border-red-300 text-sm text-center",children:u}),b&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-green-100 text-green-700 border border-green-300 text-sm text-center",children:b}),e.jsxs("label",{className:"block font-medium",children:["Category Name ",e.jsx("strong",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"category",value:d,onChange:p,className:`border w-full p-2 rounded mb-1 focus:outline-none ${i.category?"border-red-500":"border-gray-300"}`}),i.category&&e.jsx("p",{className:"text-red-500 text-sm",children:i.category})]})]})})})]})};export{R as default};
